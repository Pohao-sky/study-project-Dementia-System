<div class="tmt-wrapper">
  <h2>數字、英文連線測驗</h2>
  <div class="tmt-info">
    <span>時間: {{timerDisplay}} 秒</span>
  </div>
  <canvas #canvas width="700" height="500"
    (mousedown)="canvasPointerStart($event)"
    (mousemove)="canvasPointerMove($event)"
    (mouseup)="canvasPointerEnd($event)"
    (touchstart)="canvasPointerStart($event)"
    (touchmove)="canvasPointerMove($event)"
    (touchend)="canvasPointerEnd($event)"
    (touchcancel)="canvasPointerCancel($event)">
  </canvas>
  @if (!started) {
    <button class="tmt-start-btn" (click)="start()">開始連線測驗</button>
  }
</div>

<button
  class="next-btn"
  (click)="nextPage()"
  [class.next-btn--disabled]="!canProceed"
  [attr.aria-disabled]="!canProceed">
  下一頁
</button>

@if (showRules) {
  <div class="tmt-popup-overlay">
    <div class="tmt-popup">
      <div class="popup-msg">{{ rulesMessage }}</div>
      <button (click)="closeRules()">確定</button>
    </div>
  </div>
}

@if (showCompletionPopup) {
  <div class="tmt-popup-overlay">
    <div class="tmt-popup">
      <div class="popup-msg">{{ completionMessage }}</div>
      <button (click)="closeCompletionPopup()">確定</button>
    </div>
  </div>
}
